{"version":3,"file":"tools.js","sourceRoot":"","sources":["../../../../../lts/core/generated/Misc/tools.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport type { Nullable, float } from \"../types\";\r\nimport { Observable } from \"./observable\";\r\nimport { GetDOMTextContent, IsNavigatorAvailable, IsWindowObjectExist } from \"./domManagement\";\r\nimport { Logger } from \"./logger\";\r\nimport { DeepCopier } from \"./deepCopier\";\r\nimport { PrecisionDate } from \"./precisionDate\";\r\nimport { _WarnImport } from \"./devTools\";\r\nimport { WebRequest } from \"./webRequest\";\r\nimport type { IFileRequest } from \"./fileRequest\";\r\nimport { EngineStore } from \"../Engines/engineStore\";\r\nimport type { ReadFileError } from \"./fileTools\";\r\nimport {\r\n    FileToolsOptions,\r\n    DecodeBase64UrlToBinary,\r\n    IsBase64DataUrl,\r\n    LoadFile as FileToolsLoadFile,\r\n    LoadImage as FileToolLoadImage,\r\n    ReadFile as FileToolsReadFile,\r\n    SetCorsBehavior,\r\n} from \"./fileTools\";\r\nimport type { IOfflineProvider } from \"../Offline/IOfflineProvider\";\r\nimport { PromisePolyfill } from \"./promise\";\r\nimport { TimingTools } from \"./timingTools\";\r\nimport { InstantiationTools } from \"./instantiationTools\";\r\nimport { RandomGUID } from \"./guid\";\r\nimport type { IScreenshotSize } from \"./interfaces/screenshotSize\";\r\nimport { SliceTools } from \"./sliceTools\";\r\n\r\ndeclare type Camera = import(\"../Cameras/camera\").Camera;\r\ndeclare type Engine = import(\"../Engines/engine\").Engine;\r\n\r\ninterface IColor4Like {\r\n    r: float;\r\n    g: float;\r\n    b: float;\r\n    a: float;\r\n}\r\n\r\n/**\r\n * Class containing a set of static utilities functions\r\n */\r\nexport class Tools {\r\n    /**\r\n     * Gets or sets the base URL to use to load assets\r\n     */\r\n    public static get BaseUrl() {\r\n        return FileToolsOptions.BaseUrl;\r\n    }\r\n\r\n    public static set BaseUrl(value: string) {\r\n        FileToolsOptions.BaseUrl = value;\r\n    }\r\n\r\n    /**\r\n     * Enable/Disable Custom HTTP Request Headers globally.\r\n     * default = false\r\n     * @see CustomRequestHeaders\r\n     */\r\n    public static UseCustomRequestHeaders: boolean = false;\r\n\r\n    /**\r\n     * Custom HTTP Request Headers to be sent with XMLHttpRequests\r\n     * i.e. when loading files, where the server/service expects an Authorization header\r\n     */\r\n    public static CustomRequestHeaders = WebRequest.CustomRequestHeaders;\r\n\r\n    /**\r\n     * Gets or sets the retry strategy to apply when an error happens while loading an asset\r\n     */\r\n    public static get DefaultRetryStrategy() {\r\n        return FileToolsOptions.DefaultRetryStrategy;\r\n    }\r\n\r\n    public static set DefaultRetryStrategy(strategy: (url: string, request: WebRequest, retryIndex: number) => number) {\r\n        FileToolsOptions.DefaultRetryStrategy = strategy;\r\n    }\r\n\r\n    /**\r\n     * Default behaviour for cors in the application.\r\n     * It can be a string if the expected behavior is identical in the entire app.\r\n     * Or a callback to be able to set it per url or on a group of them (in case of Video source for instance)\r\n     */\r\n    public static get CorsBehavior(): string | ((url: string | string[]) => string) {\r\n        return FileToolsOptions.CorsBehavior;\r\n    }\r\n\r\n    public static set CorsBehavior(value: string | ((url: string | string[]) => string)) {\r\n        FileToolsOptions.CorsBehavior = value;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a global variable indicating if fallback texture must be used when a texture cannot be loaded\r\n     * @ignorenaming\r\n     */\r\n    public static get UseFallbackTexture() {\r\n        return EngineStore.UseFallbackTexture;\r\n    }\r\n\r\n    public static set UseFallbackTexture(value: boolean) {\r\n        EngineStore.UseFallbackTexture = value;\r\n    }\r\n\r\n    /**\r\n     * Use this object to register external classes like custom textures or material\r\n     * to allow the loaders to instantiate them\r\n     */\r\n    public static get RegisteredExternalClasses() {\r\n        return InstantiationTools.RegisteredExternalClasses;\r\n    }\r\n\r\n    public static set RegisteredExternalClasses(classes: { [key: string]: Object }) {\r\n        InstantiationTools.RegisteredExternalClasses = classes;\r\n    }\r\n\r\n    /**\r\n     * Texture content used if a texture cannot loaded\r\n     * @ignorenaming\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    public static get fallbackTexture() {\r\n        return EngineStore.FallbackTexture;\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    public static set fallbackTexture(value: string) {\r\n        EngineStore.FallbackTexture = value;\r\n    }\r\n\r\n    /**\r\n     * Read the content of a byte array at a specified coordinates (taking in account wrapping)\r\n     * @param u defines the coordinate on X axis\r\n     * @param v defines the coordinate on Y axis\r\n     * @param width defines the width of the source data\r\n     * @param height defines the height of the source data\r\n     * @param pixels defines the source byte array\r\n     * @param color defines the output color\r\n     */\r\n    public static FetchToRef(u: number, v: number, width: number, height: number, pixels: Uint8Array, color: IColor4Like): void {\r\n        const wrappedU = (Math.abs(u) * width) % width | 0;\r\n        const wrappedV = (Math.abs(v) * height) % height | 0;\r\n\r\n        const position = (wrappedU + wrappedV * width) * 4;\r\n        color.r = pixels[position] / 255;\r\n        color.g = pixels[position + 1] / 255;\r\n        color.b = pixels[position + 2] / 255;\r\n        color.a = pixels[position + 3] / 255;\r\n    }\r\n\r\n    /**\r\n     * Interpolates between a and b via alpha\r\n     * @param a The lower value (returned when alpha = 0)\r\n     * @param b The upper value (returned when alpha = 1)\r\n     * @param alpha The interpolation-factor\r\n     * @return The mixed value\r\n     */\r\n    public static Mix(a: number, b: number, alpha: number): number {\r\n        return a * (1 - alpha) + b * alpha;\r\n    }\r\n\r\n    /**\r\n     * Tries to instantiate a new object from a given class name\r\n     * @param className defines the class name to instantiate\r\n     * @returns the new object or null if the system was not able to do the instantiation\r\n     */\r\n    public static Instantiate(className: string): any {\r\n        return InstantiationTools.Instantiate(className);\r\n    }\r\n\r\n    /**\r\n     * Provides a slice function that will work even on IE\r\n     * @param data defines the array to slice\r\n     * @param start defines the start of the data (optional)\r\n     * @param end defines the end of the data (optional)\r\n     * @returns the new sliced array\r\n     */\r\n    public static Slice<T>(data: T, start?: number, end?: number): T {\r\n        return SliceTools.Slice(data, start, end);\r\n    }\r\n\r\n    /**\r\n     * Provides a slice function that will work even on IE\r\n     * The difference between this and Slice is that this will force-convert to array\r\n     * @param data defines the array to slice\r\n     * @param start defines the start of the data (optional)\r\n     * @param end defines the end of the data (optional)\r\n     * @returns the new sliced array\r\n     */\r\n    public static SliceToArray<T, P>(data: T, start?: number, end?: number): Array<P> {\r\n        return SliceTools.SliceToArray(data, start, end);\r\n    }\r\n\r\n    /**\r\n     * Polyfill for setImmediate\r\n     * @param action defines the action to execute after the current execution block\r\n     */\r\n    public static SetImmediate(action: () => void) {\r\n        TimingTools.SetImmediate(action);\r\n    }\r\n\r\n    /**\r\n     * Function indicating if a number is an exponent of 2\r\n     * @param value defines the value to test\r\n     * @returns true if the value is an exponent of 2\r\n     */\r\n    public static IsExponentOfTwo(value: number): boolean {\r\n        let count = 1;\r\n\r\n        do {\r\n            count *= 2;\r\n        } while (count < value);\r\n\r\n        return count === value;\r\n    }\r\n\r\n    private static _TmpFloatArray = new Float32Array(1);\r\n\r\n    /**\r\n     * Returns the nearest 32-bit single precision float representation of a Number\r\n     * @param value A Number.  If the parameter is of a different type, it will get converted\r\n     * to a number or to NaN if it cannot be converted\r\n     * @returns number\r\n     */\r\n    public static FloatRound(value: number): number {\r\n        if (Math.fround) {\r\n            return Math.fround(value);\r\n        }\r\n\r\n        return (Tools._TmpFloatArray[0] = value), Tools._TmpFloatArray[0];\r\n    }\r\n\r\n    /**\r\n     * Extracts the filename from a path\r\n     * @param path defines the path to use\r\n     * @returns the filename\r\n     */\r\n    public static GetFilename(path: string): string {\r\n        const index = path.lastIndexOf(\"/\");\r\n        if (index < 0) {\r\n            return path;\r\n        }\r\n\r\n        return path.substring(index + 1);\r\n    }\r\n\r\n    /**\r\n     * Extracts the \"folder\" part of a path (everything before the filename).\r\n     * @param uri The URI to extract the info from\r\n     * @param returnUnchangedIfNoSlash Do not touch the URI if no slashes are present\r\n     * @returns The \"folder\" part of the path\r\n     */\r\n    public static GetFolderPath(uri: string, returnUnchangedIfNoSlash = false): string {\r\n        const index = uri.lastIndexOf(\"/\");\r\n        if (index < 0) {\r\n            if (returnUnchangedIfNoSlash) {\r\n                return uri;\r\n            }\r\n            return \"\";\r\n        }\r\n\r\n        return uri.substring(0, index + 1);\r\n    }\r\n\r\n    /**\r\n     * Extracts text content from a DOM element hierarchy\r\n     * Back Compat only, please use GetDOMTextContent instead.\r\n     */\r\n    public static GetDOMTextContent = GetDOMTextContent;\r\n\r\n    /**\r\n     * Convert an angle in radians to degrees\r\n     * @param angle defines the angle to convert\r\n     * @returns the angle in degrees\r\n     */\r\n    public static ToDegrees(angle: number): number {\r\n        return (angle * 180) / Math.PI;\r\n    }\r\n\r\n    /**\r\n     * Convert an angle in degrees to radians\r\n     * @param angle defines the angle to convert\r\n     * @returns the angle in radians\r\n     */\r\n    public static ToRadians(angle: number): number {\r\n        return (angle * Math.PI) / 180;\r\n    }\r\n\r\n    /**\r\n     * Returns an array if obj is not an array\r\n     * @param obj defines the object to evaluate as an array\r\n     * @param allowsNullUndefined defines a boolean indicating if obj is allowed to be null or undefined\r\n     * @returns either obj directly if obj is an array or a new array containing obj\r\n     */\r\n    public static MakeArray(obj: any, allowsNullUndefined?: boolean): Nullable<Array<any>> {\r\n        if (allowsNullUndefined !== true && (obj === undefined || obj == null)) {\r\n            return null;\r\n        }\r\n\r\n        return Array.isArray(obj) ? obj : [obj];\r\n    }\r\n\r\n    /**\r\n     * Gets the pointer prefix to use\r\n     * @param engine defines the engine we are finding the prefix for\r\n     * @returns \"pointer\" if touch is enabled. Else returns \"mouse\"\r\n     */\r\n    public static GetPointerPrefix(engine: Engine): string {\r\n        let eventPrefix = \"pointer\";\r\n\r\n        // Check if pointer events are supported\r\n        if (IsWindowObjectExist() && !window.PointerEvent) {\r\n            eventPrefix = \"mouse\";\r\n        }\r\n\r\n        // Special Fallback MacOS Safari...\r\n        if (\r\n            engine._badDesktopOS &&\r\n            !engine._badOS &&\r\n            // And not ipad pros who claim to be macs...\r\n            !(document && \"ontouchend\" in document)\r\n        ) {\r\n            eventPrefix = \"mouse\";\r\n        }\r\n\r\n        return eventPrefix;\r\n    }\r\n\r\n    /**\r\n     * Sets the cors behavior on a dom element. This will add the required Tools.CorsBehavior to the element.\r\n     * @param url define the url we are trying\r\n     * @param element define the dom element where to configure the cors policy\r\n     * @param element.crossOrigin\r\n     */\r\n    public static SetCorsBehavior(url: string | string[], element: { crossOrigin: string | null }): void {\r\n        SetCorsBehavior(url, element);\r\n    }\r\n\r\n    // External files\r\n\r\n    /**\r\n     * Removes unwanted characters from an url\r\n     * @param url defines the url to clean\r\n     * @returns the cleaned url\r\n     */\r\n    public static CleanUrl(url: string): string {\r\n        url = url.replace(/#/gm, \"%23\");\r\n        return url;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a function used to pre-process url before using them to load assets\r\n     */\r\n    public static get PreprocessUrl() {\r\n        return FileToolsOptions.PreprocessUrl;\r\n    }\r\n\r\n    public static set PreprocessUrl(processor: (url: string) => string) {\r\n        FileToolsOptions.PreprocessUrl = processor;\r\n    }\r\n\r\n    /**\r\n     * Loads an image as an HTMLImageElement.\r\n     * @param input url string, ArrayBuffer, or Blob to load\r\n     * @param onLoad callback called when the image successfully loads\r\n     * @param onError callback called when the image fails to load\r\n     * @param offlineProvider offline provider for caching\r\n     * @param mimeType optional mime type\r\n     * @param imageBitmapOptions optional the options to use when creating an ImageBitmap\r\n     * @returns the HTMLImageElement of the loaded image\r\n     */\r\n    public static LoadImage(\r\n        input: string | ArrayBuffer | Blob,\r\n        onLoad: (img: HTMLImageElement | ImageBitmap) => void,\r\n        onError: (message?: string, exception?: any) => void,\r\n        offlineProvider: Nullable<IOfflineProvider>,\r\n        mimeType?: string,\r\n        imageBitmapOptions?: ImageBitmapOptions\r\n    ): Nullable<HTMLImageElement> {\r\n        return FileToolLoadImage(input, onLoad, onError, offlineProvider, mimeType, imageBitmapOptions);\r\n    }\r\n\r\n    /**\r\n     * Loads a file from a url\r\n     * @param url url string, ArrayBuffer, or Blob to load\r\n     * @param onSuccess callback called when the file successfully loads\r\n     * @param onProgress callback called while file is loading (if the server supports this mode)\r\n     * @param offlineProvider defines the offline provider for caching\r\n     * @param useArrayBuffer defines a boolean indicating that date must be returned as ArrayBuffer\r\n     * @param onError callback called when the file fails to load\r\n     * @returns a file request object\r\n     */\r\n    public static LoadFile(\r\n        url: string,\r\n        onSuccess: (data: string | ArrayBuffer, responseURL?: string) => void,\r\n        onProgress?: (data: any) => void,\r\n        offlineProvider?: IOfflineProvider,\r\n        useArrayBuffer?: boolean,\r\n        onError?: (request?: WebRequest, exception?: any) => void\r\n    ): IFileRequest {\r\n        return FileToolsLoadFile(url, onSuccess, onProgress, offlineProvider, useArrayBuffer, onError);\r\n    }\r\n\r\n    /**\r\n     * Loads a file from a url\r\n     * @param url the file url to load\r\n     * @param useArrayBuffer defines a boolean indicating that date must be returned as ArrayBuffer\r\n     * @returns a promise containing an ArrayBuffer corresponding to the loaded file\r\n     */\r\n    public static LoadFileAsync(url: string, useArrayBuffer: boolean = true): Promise<ArrayBuffer | string> {\r\n        return new Promise((resolve, reject) => {\r\n            FileToolsLoadFile(\r\n                url,\r\n                (data) => {\r\n                    resolve(data);\r\n                },\r\n                undefined,\r\n                undefined,\r\n                useArrayBuffer,\r\n                (request, exception) => {\r\n                    reject(exception);\r\n                }\r\n            );\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Load a script (identified by an url). When the url returns, the\r\n     * content of this file is added into a new script element, attached to the DOM (body element)\r\n     * @param scriptUrl defines the url of the script to laod\r\n     * @param onSuccess defines the callback called when the script is loaded\r\n     * @param onError defines the callback to call if an error occurs\r\n     * @param scriptId defines the id of the script element\r\n     */\r\n    public static LoadScript(scriptUrl: string, onSuccess: () => void, onError?: (message?: string, exception?: any) => void, scriptId?: string) {\r\n        if (!IsWindowObjectExist()) {\r\n            return;\r\n        }\r\n        const head = document.getElementsByTagName(\"head\")[0];\r\n        const script = document.createElement(\"script\");\r\n        script.setAttribute(\"type\", \"text/javascript\");\r\n        script.setAttribute(\"src\", scriptUrl);\r\n        if (scriptId) {\r\n            script.id = scriptId;\r\n        }\r\n\r\n        script.onload = () => {\r\n            if (onSuccess) {\r\n                onSuccess();\r\n            }\r\n        };\r\n\r\n        script.onerror = (e) => {\r\n            if (onError) {\r\n                onError(`Unable to load script '${scriptUrl}'`, e);\r\n            }\r\n        };\r\n\r\n        head.appendChild(script);\r\n    }\r\n\r\n    /**\r\n     * Load an asynchronous script (identified by an url). When the url returns, the\r\n     * content of this file is added into a new script element, attached to the DOM (body element)\r\n     * @param scriptUrl defines the url of the script to laod\r\n     * @returns a promise request object\r\n     */\r\n    public static LoadScriptAsync(scriptUrl: string): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            this.LoadScript(\r\n                scriptUrl,\r\n                () => {\r\n                    resolve();\r\n                },\r\n                (message, exception) => {\r\n                    reject(exception);\r\n                }\r\n            );\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Loads a file from a blob\r\n     * @param fileToLoad defines the blob to use\r\n     * @param callback defines the callback to call when data is loaded\r\n     * @param progressCallback defines the callback to call during loading process\r\n     * @returns a file request object\r\n     */\r\n    public static ReadFileAsDataURL(fileToLoad: Blob, callback: (data: any) => void, progressCallback: (ev: ProgressEvent) => any): IFileRequest {\r\n        const reader = new FileReader();\r\n\r\n        const request: IFileRequest = {\r\n            onCompleteObservable: new Observable<IFileRequest>(),\r\n            abort: () => reader.abort(),\r\n        };\r\n\r\n        reader.onloadend = () => {\r\n            request.onCompleteObservable.notifyObservers(request);\r\n        };\r\n\r\n        reader.onload = (e) => {\r\n            //target doesn't have result from ts 1.3\r\n            callback((<any>e.target)[\"result\"]);\r\n        };\r\n\r\n        reader.onprogress = progressCallback;\r\n\r\n        reader.readAsDataURL(fileToLoad);\r\n\r\n        return request;\r\n    }\r\n\r\n    /**\r\n     * Reads a file from a File object\r\n     * @param file defines the file to load\r\n     * @param onSuccess defines the callback to call when data is loaded\r\n     * @param onProgress defines the callback to call during loading process\r\n     * @param useArrayBuffer defines a boolean indicating that data must be returned as an ArrayBuffer\r\n     * @param onError defines the callback to call when an error occurs\r\n     * @returns a file request object\r\n     */\r\n    public static ReadFile(\r\n        file: File,\r\n        onSuccess: (data: any) => void,\r\n        onProgress?: (ev: ProgressEvent) => any,\r\n        useArrayBuffer?: boolean,\r\n        onError?: (error: ReadFileError) => void\r\n    ): IFileRequest {\r\n        return FileToolsReadFile(file, onSuccess, onProgress, useArrayBuffer, onError);\r\n    }\r\n\r\n    /**\r\n     * Creates a data url from a given string content\r\n     * @param content defines the content to convert\r\n     * @returns the new data url link\r\n     */\r\n    public static FileAsURL(content: string): string {\r\n        const fileBlob = new Blob([content]);\r\n        const url = window.URL || window.webkitURL;\r\n        const link: string = url.createObjectURL(fileBlob);\r\n        return link;\r\n    }\r\n\r\n    /**\r\n     * Format the given number to a specific decimal format\r\n     * @param value defines the number to format\r\n     * @param decimals defines the number of decimals to use\r\n     * @returns the formatted string\r\n     */\r\n    public static Format(value: number, decimals: number = 2): string {\r\n        return value.toFixed(decimals);\r\n    }\r\n\r\n    /**\r\n     * Tries to copy an object by duplicating every property\r\n     * @param source defines the source object\r\n     * @param destination defines the target object\r\n     * @param doNotCopyList defines a list of properties to avoid\r\n     * @param mustCopyList defines a list of properties to copy (even if they start with _)\r\n     */\r\n    public static DeepCopy(source: any, destination: any, doNotCopyList?: string[], mustCopyList?: string[]): void {\r\n        DeepCopier.DeepCopy(source, destination, doNotCopyList, mustCopyList);\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if the given object has no own property\r\n     * @param obj defines the object to test\r\n     * @returns true if object has no own property\r\n     */\r\n    public static IsEmpty(obj: any): boolean {\r\n        for (const i in obj) {\r\n            if (Object.prototype.hasOwnProperty.call(obj, i)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Function used to register events at window level\r\n     * @param windowElement defines the Window object to use\r\n     * @param events defines the events to register\r\n     */\r\n    public static RegisterTopRootEvents(windowElement: Window, events: { name: string; handler: Nullable<(e: FocusEvent) => any> }[]): void {\r\n        for (let index = 0; index < events.length; index++) {\r\n            const event = events[index];\r\n            windowElement.addEventListener(event.name, <any>event.handler, false);\r\n\r\n            try {\r\n                if (window.parent) {\r\n                    window.parent.addEventListener(event.name, <any>event.handler, false);\r\n                }\r\n            } catch (e) {\r\n                // Silently fails...\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Function used to unregister events from window level\r\n     * @param windowElement defines the Window object to use\r\n     * @param events defines the events to unregister\r\n     */\r\n    public static UnregisterTopRootEvents(windowElement: Window, events: { name: string; handler: Nullable<(e: FocusEvent) => any> }[]): void {\r\n        for (let index = 0; index < events.length; index++) {\r\n            const event = events[index];\r\n            windowElement.removeEventListener(event.name, <any>event.handler);\r\n\r\n            try {\r\n                if (windowElement.parent) {\r\n                    windowElement.parent.removeEventListener(event.name, <any>event.handler);\r\n                }\r\n            } catch (e) {\r\n                // Silently fails...\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @ignore\r\n     */\r\n    public static _ScreenshotCanvas: HTMLCanvasElement;\r\n\r\n    /**\r\n     * Dumps the current bound framebuffer\r\n     * @param width defines the rendering width\r\n     * @param height defines the rendering height\r\n     * @param engine defines the hosting engine\r\n     * @param successCallback defines the callback triggered once the data are available\r\n     * @param mimeType defines the mime type of the result\r\n     * @param fileName defines the filename to download. If present, the result will automatically be downloaded\r\n     * @return a void promise\r\n     */\r\n    public static async DumpFramebuffer(\r\n        width: number,\r\n        height: number,\r\n        engine: Engine,\r\n        successCallback?: (data: string) => void,\r\n        mimeType: string = \"image/png\",\r\n        fileName?: string\r\n    ) {\r\n        // Read the contents of the framebuffer\r\n        const bufferView = await engine.readPixels(0, 0, width, height);\r\n\r\n        const data = new Uint8Array(bufferView.buffer);\r\n\r\n        Tools.DumpData(width, height, data, successCallback as (data: string | ArrayBuffer) => void, mimeType, fileName, true);\r\n    }\r\n\r\n    /**\r\n     * Dumps an array buffer\r\n     * @param width defines the rendering width\r\n     * @param height defines the rendering height\r\n     * @param data the data array\r\n     * @param successCallback defines the callback triggered once the data are available\r\n     * @param mimeType defines the mime type of the result\r\n     * @param fileName defines the filename to download. If present, the result will automatically be downloaded\r\n     * @param invertY true to invert the picture in the Y dimension\r\n     * @param toArrayBuffer true to convert the data to an ArrayBuffer (encoded as `mimeType`) instead of a base64 string\r\n     * @param quality defines the quality of the result\r\n     */\r\n    public static DumpData(\r\n        width: number,\r\n        height: number,\r\n        data: ArrayBufferView,\r\n        successCallback?: (data: string | ArrayBuffer) => void,\r\n        mimeType: string = \"image/png\",\r\n        fileName?: string,\r\n        invertY = false,\r\n        toArrayBuffer = false,\r\n        quality?: number\r\n    ) {\r\n        // Create a 2D canvas to store the result\r\n        if (!Tools._ScreenshotCanvas) {\r\n            Tools._ScreenshotCanvas = document.createElement(\"canvas\");\r\n        }\r\n        Tools._ScreenshotCanvas.width = width;\r\n        Tools._ScreenshotCanvas.height = height;\r\n        const context = Tools._ScreenshotCanvas.getContext(\"2d\");\r\n\r\n        if (context) {\r\n            // Convert if data are float32\r\n            if (data instanceof Float32Array) {\r\n                const data2 = new Uint8Array(data.length);\r\n                let n = data.length;\r\n                while (n--) {\r\n                    const v = data[n];\r\n                    data2[n] = v < 0 ? 0 : v > 1 ? 1 : Math.round(v * 255);\r\n                }\r\n                data = data2;\r\n            }\r\n\r\n            // Copy the pixels to a 2D canvas\r\n            const imageData = context.createImageData(width, height);\r\n            const castData = <any>imageData.data;\r\n            castData.set(data);\r\n            context.putImageData(imageData, 0, 0);\r\n\r\n            let canvas = Tools._ScreenshotCanvas;\r\n\r\n            if (invertY) {\r\n                const canvas2 = document.createElement(\"canvas\");\r\n                canvas2.width = width;\r\n                canvas2.height = height;\r\n\r\n                const ctx2 = canvas2.getContext(\"2d\");\r\n                if (!ctx2) {\r\n                    return;\r\n                }\r\n\r\n                ctx2.translate(0, height);\r\n                ctx2.scale(1, -1);\r\n                ctx2.drawImage(Tools._ScreenshotCanvas, 0, 0);\r\n\r\n                canvas = canvas2;\r\n            }\r\n\r\n            if (toArrayBuffer) {\r\n                Tools.ToBlob(\r\n                    canvas,\r\n                    (blob) => {\r\n                        const fileReader = new FileReader();\r\n                        fileReader.onload = (event: any) => {\r\n                            const arrayBuffer = event.target!.result as ArrayBuffer;\r\n                            if (successCallback) {\r\n                                successCallback(arrayBuffer);\r\n                            }\r\n                        };\r\n                        fileReader.readAsArrayBuffer(blob!);\r\n                    },\r\n                    mimeType,\r\n                    quality\r\n                );\r\n            } else {\r\n                Tools.EncodeScreenshotCanvasData(successCallback, mimeType, fileName, canvas, quality);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Dumps an array buffer\r\n     * @param width defines the rendering width\r\n     * @param height defines the rendering height\r\n     * @param data the data array\r\n     * @param mimeType defines the mime type of the result\r\n     * @param fileName defines the filename to download. If present, the result will automatically be downloaded\r\n     * @param invertY true to invert the picture in the Y dimension\r\n     * @param toArrayBuffer true to convert the data to an ArrayBuffer (encoded as `mimeType`) instead of a base64 string\r\n     * @param quality defines the quality of the result\r\n     * @return a promise that resolve to the final data\r\n     */\r\n    public static DumpDataAsync(\r\n        width: number,\r\n        height: number,\r\n        data: ArrayBufferView,\r\n        mimeType: string = \"image/png\",\r\n        fileName?: string,\r\n        invertY = false,\r\n        toArrayBuffer = false,\r\n        quality?: number\r\n    ): Promise<string | ArrayBuffer> {\r\n        return new Promise((resolve) => {\r\n            Tools.DumpData(width, height, data, (result) => resolve(result), mimeType, fileName, invertY, toArrayBuffer, quality);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Converts the canvas data to blob.\r\n     * This acts as a polyfill for browsers not supporting the to blob function.\r\n     * @param canvas Defines the canvas to extract the data from\r\n     * @param successCallback Defines the callback triggered once the data are available\r\n     * @param mimeType Defines the mime type of the result\r\n     * @param quality defines the quality of the result\r\n     */\r\n    static ToBlob(canvas: HTMLCanvasElement, successCallback: (blob: Nullable<Blob>) => void, mimeType: string = \"image/png\", quality?: number): void {\r\n        // We need HTMLCanvasElement.toBlob for HD screenshots\r\n        if (!canvas.toBlob) {\r\n            //  low performance polyfill based on toDataURL (https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob)\r\n            canvas.toBlob = function (callback, type, quality) {\r\n                setTimeout(() => {\r\n                    const binStr = atob(this.toDataURL(type, quality).split(\",\")[1]),\r\n                        len = binStr.length,\r\n                        arr = new Uint8Array(len);\r\n\r\n                    for (let i = 0; i < len; i++) {\r\n                        arr[i] = binStr.charCodeAt(i);\r\n                    }\r\n                    callback(new Blob([arr]));\r\n                });\r\n            };\r\n        }\r\n        canvas.toBlob(\r\n            function (blob) {\r\n                successCallback(blob);\r\n            },\r\n            mimeType,\r\n            quality\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Encodes the canvas data to base 64 or automatically download the result if filename is defined\r\n     * @param successCallback defines the callback triggered once the data are available\r\n     * @param mimeType defines the mime type of the result\r\n     * @param fileName defines he filename to download. If present, the result will automatically be downloaded\r\n     * @param canvas canvas to get the data from. If not provided, use the default screenshot canvas\r\n     * @param quality defines the quality of the result\r\n     */\r\n    static EncodeScreenshotCanvasData(\r\n        successCallback?: (data: string) => void,\r\n        mimeType: string = \"image/png\",\r\n        fileName?: string,\r\n        canvas?: HTMLCanvasElement,\r\n        quality?: number\r\n    ): void {\r\n        if (successCallback) {\r\n            const base64Image = (canvas ?? Tools._ScreenshotCanvas).toDataURL(mimeType, quality);\r\n            successCallback(base64Image);\r\n        } else {\r\n            this.ToBlob(\r\n                canvas ?? Tools._ScreenshotCanvas,\r\n                function (blob) {\r\n                    //Creating a link if the browser have the download attribute on the a tag, to automatically start download generated image.\r\n                    if (\"download\" in document.createElement(\"a\")) {\r\n                        if (!fileName) {\r\n                            const date = new Date();\r\n                            const stringDate =\r\n                                (date.getFullYear() + \"-\" + (date.getMonth() + 1)).slice(2) +\r\n                                \"-\" +\r\n                                date.getDate() +\r\n                                \"_\" +\r\n                                date.getHours() +\r\n                                \"-\" +\r\n                                (\"0\" + date.getMinutes()).slice(-2);\r\n                            fileName = \"screenshot_\" + stringDate + \".png\";\r\n                        }\r\n                        Tools.Download(blob!, fileName);\r\n                    } else {\r\n                        if (blob) {\r\n                            const url = URL.createObjectURL(blob);\r\n\r\n                            const newWindow = window.open(\"\");\r\n                            if (!newWindow) {\r\n                                return;\r\n                            }\r\n                            const img = newWindow.document.createElement(\"img\");\r\n                            img.onload = function () {\r\n                                // no longer need to read the blob so it's revoked\r\n                                URL.revokeObjectURL(url);\r\n                            };\r\n                            img.src = url;\r\n                            newWindow.document.body.appendChild(img);\r\n                        }\r\n                    }\r\n                },\r\n                mimeType,\r\n                quality\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Downloads a blob in the browser\r\n     * @param blob defines the blob to download\r\n     * @param fileName defines the name of the downloaded file\r\n     */\r\n    public static Download(blob: Blob, fileName: string): void {\r\n        if (navigator && (navigator as any).msSaveBlob) {\r\n            (navigator as any).msSaveBlob(blob, fileName);\r\n            return;\r\n        }\r\n\r\n        const url = window.URL.createObjectURL(blob);\r\n        const a = document.createElement(\"a\");\r\n        document.body.appendChild(a);\r\n        a.style.display = \"none\";\r\n        a.href = url;\r\n        a.download = fileName;\r\n        a.addEventListener(\"click\", () => {\r\n            if (a.parentElement) {\r\n                a.parentElement.removeChild(a);\r\n            }\r\n        });\r\n        a.click();\r\n        window.URL.revokeObjectURL(url);\r\n    }\r\n\r\n    /**\r\n     * Will return the right value of the noPreventDefault variable\r\n     * Needed to keep backwards compatibility to the old API.\r\n     *\r\n     * @param args arguments passed to the attachControl function\r\n     * @returns the correct value for noPreventDefault\r\n     */\r\n    public static BackCompatCameraNoPreventDefault(args: IArguments): boolean {\r\n        // is it used correctly?\r\n        if (typeof args[0] === \"boolean\") {\r\n            return args[0];\r\n        } else if (typeof args[1] === \"boolean\") {\r\n            return args[1];\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Captures a screenshot of the current rendering\r\n     * @see https://doc.babylonjs.com/how_to/render_scene_on_a_png\r\n     * @param engine defines the rendering engine\r\n     * @param camera defines the source camera\r\n     * @param size This parameter can be set to a single number or to an object with the\r\n     * following (optional) properties: precision, width, height. If a single number is passed,\r\n     * it will be used for both width and height. If an object is passed, the screenshot size\r\n     * will be derived from the parameters. The precision property is a multiplier allowing\r\n     * rendering at a higher or lower resolution\r\n     * @param successCallback defines the callback receives a single parameter which contains the\r\n     * screenshot as a string of base64-encoded characters. This string can be assigned to the\r\n     * src parameter of an <img> to display it\r\n     * @param mimeType defines the MIME type of the screenshot image (default: image/png).\r\n     * Check your browser for supported MIME types\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    public static CreateScreenshot(engine: Engine, camera: Camera, size: IScreenshotSize | number, successCallback?: (data: string) => void, mimeType: string = \"image/png\"): void {\r\n        throw _WarnImport(\"ScreenshotTools\");\r\n    }\r\n\r\n    /**\r\n     * Captures a screenshot of the current rendering\r\n     * @see https://doc.babylonjs.com/how_to/render_scene_on_a_png\r\n     * @param engine defines the rendering engine\r\n     * @param camera defines the source camera\r\n     * @param size This parameter can be set to a single number or to an object with the\r\n     * following (optional) properties: precision, width, height. If a single number is passed,\r\n     * it will be used for both width and height. If an object is passed, the screenshot size\r\n     * will be derived from the parameters. The precision property is a multiplier allowing\r\n     * rendering at a higher or lower resolution\r\n     * @param mimeType defines the MIME type of the screenshot image (default: image/png).\r\n     * Check your browser for supported MIME types\r\n     * @returns screenshot as a string of base64-encoded characters. This string can be assigned\r\n     * to the src parameter of an <img> to display it\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    public static CreateScreenshotAsync(engine: Engine, camera: Camera, size: IScreenshotSize | number, mimeType: string = \"image/png\"): Promise<string> {\r\n        throw _WarnImport(\"ScreenshotTools\");\r\n    }\r\n\r\n    /**\r\n     * Generates an image screenshot from the specified camera.\r\n     * @see https://doc.babylonjs.com/how_to/render_scene_on_a_png\r\n     * @param engine The engine to use for rendering\r\n     * @param camera The camera to use for rendering\r\n     * @param size This parameter can be set to a single number or to an object with the\r\n     * following (optional) properties: precision, width, height. If a single number is passed,\r\n     * it will be used for both width and height. If an object is passed, the screenshot size\r\n     * will be derived from the parameters. The precision property is a multiplier allowing\r\n     * rendering at a higher or lower resolution\r\n     * @param successCallback The callback receives a single parameter which contains the\r\n     * screenshot as a string of base64-encoded characters. This string can be assigned to the\r\n     * src parameter of an <img> to display it\r\n     * @param mimeType The MIME type of the screenshot image (default: image/png).\r\n     * Check your browser for supported MIME types\r\n     * @param samples Texture samples (default: 1)\r\n     * @param antialiasing Whether antialiasing should be turned on or not (default: false)\r\n     * @param fileName A name for for the downloaded file.\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    public static CreateScreenshotUsingRenderTarget(\r\n        engine: Engine,\r\n        camera: Camera,\r\n        size: IScreenshotSize | number,\r\n        successCallback?: (data: string) => void,\r\n        mimeType: string = \"image/png\",\r\n        samples: number = 1,\r\n        antialiasing: boolean = false,\r\n        fileName?: string\r\n    ): void {\r\n        throw _WarnImport(\"ScreenshotTools\");\r\n    }\r\n\r\n    /**\r\n     * Generates an image screenshot from the specified camera.\r\n     * @see https://doc.babylonjs.com/how_to/render_scene_on_a_png\r\n     * @param engine The engine to use for rendering\r\n     * @param camera The camera to use for rendering\r\n     * @param size This parameter can be set to a single number or to an object with the\r\n     * following (optional) properties: precision, width, height. If a single number is passed,\r\n     * it will be used for both width and height. If an object is passed, the screenshot size\r\n     * will be derived from the parameters. The precision property is a multiplier allowing\r\n     * rendering at a higher or lower resolution\r\n     * @param mimeType The MIME type of the screenshot image (default: image/png).\r\n     * Check your browser for supported MIME types\r\n     * @param samples Texture samples (default: 1)\r\n     * @param antialiasing Whether antialiasing should be turned on or not (default: false)\r\n     * @param fileName A name for for the downloaded file.\r\n     * @returns screenshot as a string of base64-encoded characters. This string can be assigned\r\n     * to the src parameter of an <img> to display it\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    public static CreateScreenshotUsingRenderTargetAsync(\r\n        engine: Engine,\r\n        camera: Camera,\r\n        size: IScreenshotSize | number,\r\n        mimeType: string = \"image/png\",\r\n        samples: number = 1,\r\n        antialiasing: boolean = false,\r\n        fileName?: string\r\n    ): Promise<string> {\r\n        throw _WarnImport(\"ScreenshotTools\");\r\n    }\r\n\r\n    /**\r\n     * Implementation from http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#answer-2117523\r\n     * Be aware Math.random() could cause collisions, but:\r\n     * \"All but 6 of the 128 bits of the ID are randomly generated, which means that for any two ids, there's a 1 in 2^^122 (or 5.3x10^^36) chance they'll collide\"\r\n     * @returns a pseudo random id\r\n     */\r\n    public static RandomId(): string {\r\n        return RandomGUID();\r\n    }\r\n\r\n    /**\r\n     * Test if the given uri is a base64 string\r\n     * @deprecated Please use FileTools.IsBase64DataUrl instead.\r\n     * @param uri The uri to test\r\n     * @return True if the uri is a base64 string or false otherwise\r\n     */\r\n    public static IsBase64(uri: string): boolean {\r\n        return IsBase64DataUrl(uri);\r\n    }\r\n\r\n    /**\r\n     * Decode the given base64 uri.\r\n     * @deprecated Please use FileTools.DecodeBase64UrlToBinary instead.\r\n     * @param uri The uri to decode\r\n     * @return The decoded base64 data.\r\n     */\r\n    public static DecodeBase64(uri: string): ArrayBuffer {\r\n        return DecodeBase64UrlToBinary(uri);\r\n    }\r\n\r\n    public static GetAbsoluteUrl: (url: string) => string =\r\n        typeof document === \"object\"\r\n            ? (url) => {\r\n                  const a = document.createElement(\"a\");\r\n                  a.href = url;\r\n                  return a.href;\r\n              }\r\n            : typeof URL === \"function\" && typeof location === \"object\"\r\n            ? (url) => new URL(url, location.origin).href\r\n            : () => {\r\n                  throw new Error(\"Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.\");\r\n              };\r\n\r\n    // Logs\r\n    /**\r\n     * No log\r\n     */\r\n    public static readonly NoneLogLevel = Logger.NoneLogLevel;\r\n    /**\r\n     * Only message logs\r\n     */\r\n    public static readonly MessageLogLevel = Logger.MessageLogLevel;\r\n    /**\r\n     * Only warning logs\r\n     */\r\n    public static readonly WarningLogLevel = Logger.WarningLogLevel;\r\n    /**\r\n     * Only error logs\r\n     */\r\n    public static readonly ErrorLogLevel = Logger.ErrorLogLevel;\r\n    /**\r\n     * All logs\r\n     */\r\n    public static readonly AllLogLevel = Logger.AllLogLevel;\r\n\r\n    /**\r\n     * Gets a value indicating the number of loading errors\r\n     * @ignorenaming\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    public static get errorsCount(): number {\r\n        return Logger.errorsCount;\r\n    }\r\n\r\n    /**\r\n     * Callback called when a new log is added\r\n     */\r\n    public static OnNewCacheEntry: (entry: string) => void;\r\n\r\n    /**\r\n     * Log a message to the console\r\n     * @param message defines the message to log\r\n     */\r\n    public static Log(message: string): void {\r\n        Logger.Log(message);\r\n    }\r\n\r\n    /**\r\n     * Write a warning message to the console\r\n     * @param message defines the message to log\r\n     */\r\n    public static Warn(message: string): void {\r\n        Logger.Warn(message);\r\n    }\r\n\r\n    /**\r\n     * Write an error message to the console\r\n     * @param message defines the message to log\r\n     */\r\n    public static Error(message: string): void {\r\n        Logger.Error(message);\r\n    }\r\n\r\n    /**\r\n     * Gets current log cache (list of logs)\r\n     */\r\n    public static get LogCache(): string {\r\n        return Logger.LogCache;\r\n    }\r\n\r\n    /**\r\n     * Clears the log cache\r\n     */\r\n    public static ClearLogCache(): void {\r\n        Logger.ClearLogCache();\r\n    }\r\n\r\n    /**\r\n     * Sets the current log level (MessageLogLevel / WarningLogLevel / ErrorLogLevel)\r\n     */\r\n    public static set LogLevels(level: number) {\r\n        Logger.LogLevels = level;\r\n    }\r\n\r\n    /**\r\n     * Checks if the window object exists\r\n     * Back Compat only, please use IsWindowObjectExist instead.\r\n     */\r\n    public static IsWindowObjectExist = IsWindowObjectExist;\r\n\r\n    // Performances\r\n\r\n    /**\r\n     * No performance log\r\n     */\r\n    public static readonly PerformanceNoneLogLevel = 0;\r\n    /**\r\n     * Use user marks to log performance\r\n     */\r\n    public static readonly PerformanceUserMarkLogLevel = 1;\r\n    /**\r\n     * Log performance to the console\r\n     */\r\n    public static readonly PerformanceConsoleLogLevel = 2;\r\n\r\n    private static _Performance: Performance;\r\n\r\n    /**\r\n     * Sets the current performance log level\r\n     */\r\n    public static set PerformanceLogLevel(level: number) {\r\n        if ((level & Tools.PerformanceUserMarkLogLevel) === Tools.PerformanceUserMarkLogLevel) {\r\n            Tools.StartPerformanceCounter = Tools._StartUserMark;\r\n            Tools.EndPerformanceCounter = Tools._EndUserMark;\r\n            return;\r\n        }\r\n\r\n        if ((level & Tools.PerformanceConsoleLogLevel) === Tools.PerformanceConsoleLogLevel) {\r\n            Tools.StartPerformanceCounter = Tools._StartPerformanceConsole;\r\n            Tools.EndPerformanceCounter = Tools._EndPerformanceConsole;\r\n            return;\r\n        }\r\n\r\n        Tools.StartPerformanceCounter = Tools._StartPerformanceCounterDisabled;\r\n        Tools.EndPerformanceCounter = Tools._EndPerformanceCounterDisabled;\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    private static _StartPerformanceCounterDisabled(counterName: string, condition?: boolean): void {}\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    private static _EndPerformanceCounterDisabled(counterName: string, condition?: boolean): void {}\r\n\r\n    private static _StartUserMark(counterName: string, condition = true): void {\r\n        if (!Tools._Performance) {\r\n            if (!IsWindowObjectExist()) {\r\n                return;\r\n            }\r\n            Tools._Performance = window.performance;\r\n        }\r\n\r\n        if (!condition || !Tools._Performance.mark) {\r\n            return;\r\n        }\r\n        Tools._Performance.mark(counterName + \"-Begin\");\r\n    }\r\n\r\n    private static _EndUserMark(counterName: string, condition = true): void {\r\n        if (!condition || !Tools._Performance.mark) {\r\n            return;\r\n        }\r\n        Tools._Performance.mark(counterName + \"-End\");\r\n        Tools._Performance.measure(counterName, counterName + \"-Begin\", counterName + \"-End\");\r\n    }\r\n\r\n    private static _StartPerformanceConsole(counterName: string, condition = true): void {\r\n        if (!condition) {\r\n            return;\r\n        }\r\n\r\n        Tools._StartUserMark(counterName, condition);\r\n\r\n        if (console.time) {\r\n            console.time(counterName);\r\n        }\r\n    }\r\n\r\n    private static _EndPerformanceConsole(counterName: string, condition = true): void {\r\n        if (!condition) {\r\n            return;\r\n        }\r\n\r\n        Tools._EndUserMark(counterName, condition);\r\n\r\n        console.timeEnd(counterName);\r\n    }\r\n\r\n    /**\r\n     * Starts a performance counter\r\n     */\r\n    public static StartPerformanceCounter: (counterName: string, condition?: boolean) => void = Tools._StartPerformanceCounterDisabled;\r\n\r\n    /**\r\n     * Ends a specific performance counter\r\n     */\r\n    public static EndPerformanceCounter: (counterName: string, condition?: boolean) => void = Tools._EndPerformanceCounterDisabled;\r\n\r\n    /**\r\n     * Gets either window.performance.now() if supported or Date.now() else\r\n     */\r\n    public static get Now(): number {\r\n        return PrecisionDate.Now;\r\n    }\r\n\r\n    /**\r\n     * This method will return the name of the class used to create the instance of the given object.\r\n     * It will works only on Javascript basic data types (number, string, ...) and instance of class declared with the @className decorator.\r\n     * @param object the object to get the class name from\r\n     * @param isType defines if the object is actually a type\r\n     * @returns the name of the class, will be \"object\" for a custom data type not using the @className decorator\r\n     */\r\n    public static GetClassName(object: any, isType: boolean = false): string {\r\n        let name = null;\r\n\r\n        if (!isType && object.getClassName) {\r\n            name = object.getClassName();\r\n        } else {\r\n            if (object instanceof Object) {\r\n                const classObj = isType ? object : Object.getPrototypeOf(object);\r\n                name = classObj.constructor[\"__bjsclassName__\"];\r\n            }\r\n            if (!name) {\r\n                name = typeof object;\r\n            }\r\n        }\r\n        return name;\r\n    }\r\n\r\n    /**\r\n     * Gets the first element of an array satisfying a given predicate\r\n     * @param array defines the array to browse\r\n     * @param predicate defines the predicate to use\r\n     * @returns null if not found or the element\r\n     */\r\n    public static First<T>(array: Array<T>, predicate: (item: T) => boolean): Nullable<T> {\r\n        for (const el of array) {\r\n            if (predicate(el)) {\r\n                return el;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * This method will return the name of the full name of the class, including its owning module (if any).\r\n     * It will works only on Javascript basic data types (number, string, ...) and instance of class declared with the @className decorator or implementing a method getClassName():string (in which case the module won't be specified).\r\n     * @param object the object to get the class name from\r\n     * @param isType defines if the object is actually a type\r\n     * @return a string that can have two forms: \"moduleName.className\" if module was specified when the class' Name was registered or \"className\" if there was not module specified.\r\n     * @ignorenaming\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    public static getFullClassName(object: any, isType: boolean = false): Nullable<string> {\r\n        let className = null;\r\n        let moduleName = null;\r\n\r\n        if (!isType && object.getClassName) {\r\n            className = object.getClassName();\r\n        } else {\r\n            if (object instanceof Object) {\r\n                const classObj = isType ? object : Object.getPrototypeOf(object);\r\n                className = classObj.constructor[\"__bjsclassName__\"];\r\n                moduleName = classObj.constructor[\"__bjsmoduleName__\"];\r\n            }\r\n            if (!className) {\r\n                className = typeof object;\r\n            }\r\n        }\r\n\r\n        if (!className) {\r\n            return null;\r\n        }\r\n\r\n        return (moduleName != null ? moduleName + \".\" : \"\") + className;\r\n    }\r\n\r\n    /**\r\n     * Returns a promise that resolves after the given amount of time.\r\n     * @param delay Number of milliseconds to delay\r\n     * @returns Promise that resolves after the given amount of time\r\n     */\r\n    public static DelayAsync(delay: number): Promise<void> {\r\n        return new Promise((resolve) => {\r\n            setTimeout(() => {\r\n                resolve();\r\n            }, delay);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Utility function to detect if the current user agent is Safari\r\n     * @returns whether or not the current user agent is safari\r\n     */\r\n    public static IsSafari(): boolean {\r\n        if (!IsNavigatorAvailable()) {\r\n            return false;\r\n        }\r\n\r\n        return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n    }\r\n}\r\n\r\n/**\r\n * Use this className as a decorator on a given class definition to add it a name and optionally its module.\r\n * You can then use the Tools.getClassName(obj) on an instance to retrieve its class name.\r\n * This method is the only way to get it done in all cases, even if the .js file declaring the class is minified\r\n * @param name The name of the class, case should be preserved\r\n * @param module The name of the Module hosting the class, optional, but strongly recommended to specify if possible. Case should be preserved.\r\n */\r\nexport function className(name: string, module?: string): (target: Object) => void {\r\n    return (target: Object) => {\r\n        (<any>target)[\"__bjsclassName__\"] = name;\r\n        (<any>target)[\"__bjsmoduleName__\"] = module != null ? module : null;\r\n    };\r\n}\r\n\r\n/**\r\n * An implementation of a loop for asynchronous functions.\r\n */\r\nexport class AsyncLoop {\r\n    /**\r\n     * Defines the current index of the loop.\r\n     */\r\n    public index: number;\r\n    private _done: boolean;\r\n    private _fn: (asyncLoop: AsyncLoop) => void;\r\n    private _successCallback: () => void;\r\n\r\n    /**\r\n     * Constructor.\r\n     * @param iterations the number of iterations.\r\n     * @param func the function to run each iteration\r\n     * @param successCallback the callback that will be called upon successful execution\r\n     * @param offset starting offset.\r\n     */\r\n    constructor(\r\n        /**\r\n         * Defines the number of iterations for the loop\r\n         */\r\n        public iterations: number,\r\n        func: (asyncLoop: AsyncLoop) => void,\r\n        successCallback: () => void,\r\n        offset: number = 0\r\n    ) {\r\n        this.index = offset - 1;\r\n        this._done = false;\r\n        this._fn = func;\r\n        this._successCallback = successCallback;\r\n    }\r\n\r\n    /**\r\n     * Execute the next iteration. Must be called after the last iteration was finished.\r\n     */\r\n    public executeNext(): void {\r\n        if (!this._done) {\r\n            if (this.index + 1 < this.iterations) {\r\n                ++this.index;\r\n                this._fn(this);\r\n            } else {\r\n                this.breakLoop();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Break the loop and run the success callback.\r\n     */\r\n    public breakLoop(): void {\r\n        this._done = true;\r\n        this._successCallback();\r\n    }\r\n\r\n    /**\r\n     * Create and run an async loop.\r\n     * @param iterations the number of iterations.\r\n     * @param fn the function to run each iteration\r\n     * @param successCallback the callback that will be called upon successful execution\r\n     * @param offset starting offset.\r\n     * @returns the created async loop object\r\n     */\r\n    public static Run(iterations: number, fn: (asyncLoop: AsyncLoop) => void, successCallback: () => void, offset: number = 0): AsyncLoop {\r\n        const loop = new AsyncLoop(iterations, fn, successCallback, offset);\r\n\r\n        loop.executeNext();\r\n\r\n        return loop;\r\n    }\r\n\r\n    /**\r\n     * A for-loop that will run a given number of iterations synchronous and the rest async.\r\n     * @param iterations total number of iterations\r\n     * @param syncedIterations number of synchronous iterations in each async iteration.\r\n     * @param fn the function to call each iteration.\r\n     * @param callback a success call back that will be called when iterating stops.\r\n     * @param breakFunction a break condition (optional)\r\n     * @param timeout timeout settings for the setTimeout function. default - 0.\r\n     * @returns the created async loop object\r\n     */\r\n    public static SyncAsyncForLoop(\r\n        iterations: number,\r\n        syncedIterations: number,\r\n        fn: (iteration: number) => void,\r\n        callback: () => void,\r\n        breakFunction?: () => boolean,\r\n        timeout: number = 0\r\n    ): AsyncLoop {\r\n        return AsyncLoop.Run(\r\n            Math.ceil(iterations / syncedIterations),\r\n            (loop: AsyncLoop) => {\r\n                if (breakFunction && breakFunction()) {\r\n                    loop.breakLoop();\r\n                } else {\r\n                    setTimeout(() => {\r\n                        for (let i = 0; i < syncedIterations; ++i) {\r\n                            const iteration = loop.index * syncedIterations + i;\r\n                            if (iteration >= iterations) {\r\n                                break;\r\n                            }\r\n                            fn(iteration);\r\n                            if (breakFunction && breakFunction()) {\r\n                                loop.breakLoop();\r\n                                break;\r\n                            }\r\n                        }\r\n                        loop.executeNext();\r\n                    }, timeout);\r\n                }\r\n            },\r\n            callback\r\n        );\r\n    }\r\n}\r\n\r\n// Will only be define if Tools is imported freeing up some space when only engine is required\r\nEngineStore.FallbackTexture =\r\n    \"data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z\";\r\n\r\n// Register promise fallback for IE\r\nPromisePolyfill.Apply();\r\n"]}